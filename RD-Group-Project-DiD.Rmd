---
title: "RD-Group-Project-DiD"
author: "Sophie Hensgen"
date: "11/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(readr)
library(tidyverse)
library(stargazer)
```

## Load Data Set


```{r load data set}
df <- read.table("public.dat")
df

```

## Code


```{r arrange data, echo=FALSE}

# arrange data to better observe

arrange(df, V1)

```

```{r Rename Varibales, echo=FALSE}

## changing into tibble
df <- as_tibble(df)

## Rename Columns for a better workflow
# x stands for independent variable/covariates
# y stands for dependent variable
# d stands for treatement variable
df <- df %>% 
  rename(
    x_id = V1,
    x_store.name = V2, #chain 1=bk; 2=kfc; 3=roys; 4=wendys
    x_co.owned = V3,
    d_state = V4, #
    x_south.j = V5,
    x_central.j = V6,
    x_north.j = V7,
    x_northeast.philly = V8,
    x_easton.philly = V9,
    x_shore.j = V10, #
    x_callbacks.first = V11,
    y_full.emp = V12,
    y_part.emp = V13,
    y_managers = V14,
    x_st.wage.before = V15,
    x_months.raise = V16, 
    x_amount.raise = V17,
    x_cash.bounty = V18,
    y_employees.affected.n.minimum = V19,
    x_reduced = V20,
    x_open.hour = V21,
    x_open.per.day = V22,
    x_medium.soda = V23,
    x_small.fries = V24,
    x_entree = V25,
    x_cash.reg = V26,
    x_reg.11 = V27, #
    x_type.sec.interview = V28,
    x_status.sec.interview = V29,
    x_date.sec = V30,
    x_callbacks.sec = V31,
    y_full.emp.sec = V32,
    y_part.emp.sec = V33,
    y_managers.sec = V34,
    x_st.wage.after = V35,
    x_months.raise.sec = V36,
    x_amount.raise.sec = V37,
    x_special.program.sec = V38,
    x_reduced.price = V39,
    x_open.hour.sec = V40,
    x_open.per.day.sec = V41,
    x_medium.soda.sec = V42,
    x_small.fries.sec = V43,
    x_entree.sec = V44,
    x_cash.reg.sec = V45,
    x_reg.11.sec = V46
    )

# Creating a new variable which says 1 if the restaurant was interviewed in the first wave
df$x_interviewed.w1 <- (df$x_interviewed.w1 = 1)

# creating new variables for each store (x_store.name) and state (d_state) into dummies. 
#x_bk <- 
#x_kfc <- 

# add individual variables instead of one for the stores as well as the states
```

```{r changing class , echo=FALSE}

# Some variables are a character vector, which cannot be used in a summary. Therefore they have to be changed. 



```

```{r, echo=FALSE}
#Summary Statistic of a subset of the data frame df

#subsetting the data frame
df.select <- df %>%
  select(x_co.owned, x_south.j, x_central.j, x_north.j, x_northeast.philly, x_easton.philly, x_st.wage.before, x_st.wage.after, x_open.per.day, x_open.per.day.sec, y_full.emp, y_full.emp.sec, d_state, x_store.name)

#summary of the subset
stargazer(data.frame(df.select), type = "text", summary = TRUE)

```


```{r Table 1 - Sample Size and response rate, echo=FALSE}

# first wave
# d_state

# count number interviewed
count.all.w1 <- df %>% 
  count(d_state)

count.all.w1

# response rate nj
count.all.per <- df %>%
  tally(x_interviewed.w1)%>%
  mutate(percent = n/473)

# response rate nj
count.nj.per <- df %>%
  count(d_state) %>%
  filter(d_state == 1) %>%
  mutate(percent = n/364)

# response rate pa
count.pa.per <- df %>%
  count(d_state) %>%
  filter(d_state == 0) %>%
  mutate(percent = n/109)

# second wave
# x_status.sec.interview, d_state

count.all.w2 <- df %>% 
  count(x_status.sec.interview)

count.nj <- df %>% 
  filter(d_state == 1) %>% # NJ
  count(x_status.sec.interview)

count.pa <- df %>% 
  filter(d_state == 0) %>% # PA
  count(x_status.sec.interview)

count.all.w2
count.nj
count.pa

```

```{r Table 2 - Means of Key Variables, echo=FALSE}




```

```{r Figure 1 - Distribution of starting wage rates, echo=FALSE}




```

```{r Table 3 - Average eMployment per store before and after the raise, echo=FALSE}




```

```{r Table 4 - Reduced Form Models for change in employment, echo=FALSE}




```

```{r Table 5 - Specification tests of reduced form employment models, echo=FALSE}




```












